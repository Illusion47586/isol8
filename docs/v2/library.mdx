---
title: "Library Reference"
description: "Complete TypeScript/JavaScript library reference for isol8."
icon: "book-open"
---

The `isol8` package exports the `DockerIsol8` class for local execution and `RemoteIsol8` for connecting to a remote server. Both implement the `Isol8Engine` interface.

## Installation

```bash
npm install isol8
# or
bun add isol8
```

## `DockerIsol8`

The main engine class for local execution using Docker.

```typescript
import { DockerIsol8 } from "isol8";

const engine = new DockerIsol8(options);
```

### Constructor Options (`Isol8Options`)

| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| `mode` | `"ephemeral" \| "persistent"` | `"ephemeral"` | Lifecycle mode. Ephemeral uses a warm pool; persistent keeps one container alive. |
| `network` | `"none" \| "host" \| "filtered"` | `"none"` | Network access mode. |
| `networkFilter` | `{ whitelist: string[], blacklist: string[] }` | - | Regex rules for `filtered` mode. |
| `cpuLimit` | `number` | `1.0` | CPU limit as a fraction of a core. |
| `memoryLimit` | `string` | `"512m"` | Docker memory limit (e.g. `256m`, `1g`). |
| `pidsLimit` | `number` | `64` | Maximum number of processes allowed. |
| `readonlyRootFs` | `boolean` | `true` | Mount root filesystem as read-only. |
| `maxOutputSize` | `number` | `1MB` | Maximum output size in bytes before truncation. |
| `secrets` | `Record<string, string>` | - | Secret env vars. Values are masked in output. |
| `timeoutMs` | `number` | `30000` | Default execution timeout in milliseconds. |
| `image` | `string` | - | Override the Docker image. |
| `sandboxSize` | `string` | `"512m"` | Size of the writable `/sandbox` tmpfs mount. |
| `tmpSize` | `string` | `"256m"` | Size of the read-only `/tmp` tmpfs mount. |
| `debug` | `boolean` | `false` | Enable verbose internal logging. |
| `persist` | `boolean` | `false` | Keep container running after execution (for debugging). |
| `logNetwork` | `boolean` | `false` | Log network requests in `filtered` mode. |
| `security` | `SecurityConfig` | - | Security settings (seccomp profiles). |
| `audit` | `AuditConfig` | - | Audit logging configuration. |
| `poolStrategy` | `"fast" \| "secure"` | `"fast"` | Container pool strategy. |
| `poolSize` | `number \| { clean: number, dirty: number }` | `1` | Number of warm containers to keep ready. |

### Methods

#### `start()`
Initialize the engine. Must be called before `execute()`.
```typescript
await engine.start();
```

#### `stop()`
Stop the engine and clean up resources (drain pool or stop persistent container).
```typescript
await engine.stop();
```

#### `execute(req)`
Execute code and return the result.
```typescript
const result = await engine.execute({
  code: 'print("hello")',
  runtime: "python",
  // ... options
});
```

#### `executeStream(req)`
Execute code and stream output.
```typescript
for await (const event of engine.executeStream(req)) {
  console.log(event.type, event.data);
}
```

#### `putFile(path, content)`
Upload a file (persistent mode only).
```typescript
await engine.putFile("/sandbox/data.csv", "1,2,3");
```

#### `getFile(path)`
Download a file (persistent mode only).
```typescript
const content = await engine.getFile("/sandbox/output.txt");
```

#### `DockerIsol8.cleanup(docker?)`
Static method to remove orphaned isol8 containers.
```typescript
const result = await DockerIsol8.cleanup();
console.log(`Removed ${result.removed} containers`);
```

## `RemoteIsol8`

Connects to a remote `isol8 serve` instance.

```typescript
import { RemoteIsol8 } from "isol8";

const engine = new RemoteIsol8(connectionOptions, engineOptions);
```

### Connection Options

| Option | Type | Required | Description |
|:-------|:-----|:---------|:------------|
| `host` | `string` | Yes | URL of the remote server (e.g. `http://localhost:3000`). |
| `apiKey` | `string` | Yes | Bearer token for authentication. |
| `sessionId` | `string` | No | Session ID for persistent mode. |

### Engine Options

Same as `DockerIsol8` options. These are sent to the server to configure the execution environment.

## `ExecutionRequest`

The object passed to `execute()`.

| Field | Type | Description |
|:------|:-----|:------------|
| `code` | `string` | Source code to execute. |
| `runtime` | `"python" \| "node" \| "bun" \| "deno" \| "bash"` | Target runtime. |
| `timeoutMs` | `number` | Override default timeout. |
| `env` | `Record<string, string>` | Additional environment variables. |
| `stdin` | `string` | Data to pipe to stdin. |
| `files` | `Record<string, string \| Buffer>` | Files to inject before execution. |
| `outputPaths` | `string[]` | Files to retrieve after execution. |
| `installPackages` | `string[]` | Packages to install before execution. |
| `metadata` | `Record<string, string>` | Metadata for audit logs. |

## `ExecutionResult`

The object returned by `execute()`.

| Field | Type | Description |
|:------|:-----|:------------|
| `stdout` | `string` | Captured standard output. |
| `stderr` | `string` | Captured standard error. |
| `exitCode` | `number` | Process exit code (0 = success). |
| `durationMs` | `number` | Execution duration in milliseconds. |
| `truncated` | `boolean` | Whether output was truncated. |
| `executionId` | `string` | Unique ID for this execution. |
| `files` | `Record<string, string>` | Retrieved files (base64 encoded). |
| `resourceUsage` | `object` | CPU, memory, network usage metrics. |
| `networkLogs` | `NetworkLogEntry[]` | Log of network requests (if enabled). |
