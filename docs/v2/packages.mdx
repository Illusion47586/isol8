---
title: "Packages & Images"
description: "How to manage dependencies: on-the-fly installation and custom Docker images."
---

Dependency management is crucial for robust code execution. isol8 offers two strategies:

1. **On-the-fly Installation**: Install packages before each execution. Flexible but slower.
2. **Custom Images**: Bake packages into the Docker image. Fast and reproducible.

## Strategy 1: On-the-Fly Installation

Great for prototyping or when you need different packages for every run.

### CLI Usage (`--install`)

Use `--install <package>` (can be repeated).

```bash
# Python: pip install
isol8 run -e "import numpy; print(numpy.__version__)" 
  --runtime python --install numpy

# Node.js: npm install
isol8 run -e "const _ = require('lodash'); console.log(_.chunk([1,2,3,4], 2))" 
  --runtime node --install lodash

# Bun: bun add
isol8 run -e "import { z } from 'zod'; console.log(z.string().parse('hello'))" 
  --runtime bun --install zod
```

### Library Usage (`installPackages`)

Pass an array of package names.

```typescript
const result = await isol8.execute({
  code: 'import pandas as pd; print(pd.__version__)',
  runtime: "python",
  installPackages: ["pandas", "numpy"],
});
```

<Warning>
  Installation happens inside the container before code execution. This adds overhead (seconds to minutes depending on package size). For frequently used packages, prefer custom images.
</Warning>

## Strategy 2: Custom Images (Recommended)

Bake your dependencies into a custom Docker image (`isol8:python-custom`, etc.). This eliminates installation time during execution.

### Creating Custom Images

Run `isol8 setup` with package flags.

```bash
# Bake numpy and pandas into the Python image
isol8 setup --python numpy,pandas

# Bake lodash into the Node.js image
isol8 setup --node lodash
```

This creates a new Docker image tagged `isol8:python-custom` that extends the base `isol8:python` image.

### Using Custom Images

Once built, isol8 automatically prefers the custom image. You don't need any special flags.

```bash
# Automatically uses isol8:python-custom (with numpy pre-installed)
isol8 run -e "import numpy; print(numpy.__version__)" --runtime python
```

### Config File (`isol8.config.json`)

Define dependencies in your config file to ensure consistent environments across your team.

```json
{
  "dependencies": {
    "python": ["numpy", "pandas", "scikit-learn"],
    "node": ["lodash", "express"],
    "bun": ["zod"],
    "bash": ["jq", "curl"]
  }
}
```

Run `isol8 setup` to apply changes.

## Image Architecture

Understanding how images are built helps optimize your setup.

### Base Images

- **`isol8:python`**: Python 3.x + pip
- **`isol8:node`**: Node.js LTS + npm
- **`isol8:bun`**: Bun runtime
- **`isol8:deno`**: Deno runtime
- **`isol8:bash`**: Bash + apk

Built from a minimal Alpine 3.21 base for security and speed.

### Custom Images

Custom images extend the base image. For example, `isol8:python-custom` is built like this:

```dockerfile
FROM isol8:python
RUN pip install --no-cache-dir numpy pandas scikit-learn
```

This ensures your custom image inherits all security features (non-root user, proxy, etc.) from the base image.

### Smart Rebuilds

`isol8 setup` uses intelligent caching. It computes a hash of your dependencies and only rebuilds if something changed.

```bash
# Up to date - skips build
isol8 setup

# Add a package - triggers rebuild
isol8 setup --python requests
```

Use `--force` to rebuild unconditionally.

## Reference

<CardGroup cols={2}>
  <Card title="CLI Reference" icon="terminal" href="/v2/cli#isol8-setup">
    All `isol8 setup` options and flags.
  </Card>
  <Card title="Configuration" icon="gear" href="/v2/configuration#dependencies-dependencies">
    Full schema for `dependencies` in `isol8.config.json`.
  </Card>
</CardGroup>
