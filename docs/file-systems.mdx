---
title: "File Systems"
description: "Understand how isol8 manages file systems, including read-only root environments and memory-backed tmpfs mounts."
---

# File Systems

When executing untrusted code, restricting what the code can read from and write to the file system is a critical defense layer. `isol8` provisions a highly isolated file system environment for every execution. 

By default, the container's root file system is immutable (read-only), while specific temporary directories are mounted as ephemeral, memory-backed filesystems (`tmpfs`).

<CardGroup cols={2}>
  <Card title="Read-Only Root" icon="lock">
    The entire `/` file system is immutable by default to prevent tampering and persistent changes.
  </Card>
  <Card title="Tmpfs Mounts" icon="memory">
    Directories like `/tmp` and `/sandbox` are mounted in memory for fast, ephemeral scratch space.
  </Card>
</CardGroup>

## Read-Only Root

By default, the execution environment operates with a read-only root file system (`readonlyRootFs: true`). This security best practice ensures that malicious or buggy code cannot modify system binaries, configuration files, or the underlying runtime environment.

Any attempt to write outside of the designated `tmpfs` mounts will result in an immediate `"Read-only file system"` error from the OS.

### Making the File System Writable

In certain use cases (e.g., legacy workloads or specific compilation tasks), you might need a globally writable file system. You can disable the read-only restriction, but this is **highly discouraged** for untrusted code execution.

<Tabs>
  <Tab title="CLI">
    Use the `--writable` flag to make the root file system writable.
    ```bash
    isol8 execute python --code "open('/writable.txt', 'w').write('test')" --writable
    ```
  </Tab>
  <Tab title="Library">
    Set `readonlyRootFs: false` in your configuration.
    ```typescript
    import { Isol8 } from 'isol8';

    const engine = new Isol8();
    await engine.execute({
      runtime: 'python',
      code: "open('/writable.txt', 'w').write('test')",
      readonlyRootFs: false
    });
    ```
  </Tab>
</Tabs>

<Warning>
  Disabling `readonlyRootFs` decreases the security posture of your sandbox. Combined with poor configuration, it could potentially aid in container escape methodologies. Always evaluate if writing to `/sandbox` or `/tmp` is sufficient for your workload.
</Warning>

## Tmpfs Mounts

Even with a read-only root, agents and scripts often need temporary space to write intermediate files, download assets, or compile extensions. `isol8` solves this by mounting specific directories as `tmpfs` volumes.

A `tmpfs` mount resides entirely in host RAM (or swap space) rather than on disk. This provides two major benefits:
1. **Speed**: File I/O operations in these directories are significantly faster than disk-backed storage.
2. **Ephemeral Guarantees**: When the container is destroyed, the contents of the `tmpfs` mounts vanish instantly. There is zero risk of data persistence across executions.

`isol8` provisions two default `tmpfs` mounts:

### `/sandbox`

The `/sandbox` directory is the default working directory (`cwd`) for all code executed in `isol8`. This is where you should write any generated artifacts, logs, or intermediate state.
- **Default Size**: `512m` (512 Megabytes)
- **Usage**: General scratchpad, `cwd` for execution, and the destination for packages installed via the `--install` flag.

### `/tmp`

The standard `/tmp` directory is also mounted as an independent `tmpfs` volume. This ensures compatibility with runtimes and tools that hardcode `/tmp` for their operations.
- **Default Size**: `256m` (256 Megabytes)
- **Usage**: System temp files, runtime cache.

### Configuring Tmpfs Sizes

You can adjust the maximum size of these mounts depending on your workload's memory requirements.

<Tabs>
  <Tab title="Library">
    Use the `sandboxFsSize` and `tmpFsSize` properties in your execution configuration to allocate more or less space.
    ```typescript
    await engine.execute({
      runtime: 'python',
      code: "...",
      sandboxFsSize: '1g', // Allow up to 1GB in /sandbox
      tmpFsSize: '512m'    // Allow up to 512MB in /tmp
    });
    ```
  </Tab>
</Tabs>

<Note>
  Because `tmpfs` mounts consume the host's memory, setting exceedingly large limits without enforcing corresponding container RAM constraints could lead to host memory exhaustion. Ensure your overall `memory` limit accounts for the expected `tmpfs` usage.
</Note>
